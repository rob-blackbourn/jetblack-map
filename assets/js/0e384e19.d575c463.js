"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9671],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return d}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},s=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,s=u(e,["components","mdxType","originalType","parentName"]),p=c(n),d=o,f=p["".concat(l,".").concat(d)]||p[d]||m[d]||i;return n?r.createElement(f,a(a({ref:t},s),{},{components:n})):r.createElement(f,a({ref:t},s))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=p;var u={};for(var l in t)hasOwnProperty.call(t,l)&&(u[l]=t[l]);u.originalType=e,u.mdxType="string"==typeof e?e:o,a[1]=u;for(var c=2;c<i;c++)a[c]=n[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},1749:function(e,t,n){n.r(t),n.d(t,{assets:function(){return J},contentTitle:function(){return X},default:function(){return G},frontMatter:function(){return I},metadata:function(){return Z},toc:function(){return R}});var r=n(7462),o=n(3366),i=n(7294),a=n(3905),u=n(1298),l=n(5893),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function m(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function p(e,t,n){void 0===n&&(n=1);var r=Math.ceil((t-e)/n);return Array.from({length:r},(function(t,r){return r*n+e}))}var d=function(e,t,n,r,o){var i=e[0],a=e[1];return(0,u.Mz)({latitude:a,longitude:i},t,n,r,o)};function f(e,t){var n=e[0],r=e[1];return(0,u.pX)(r,n,t)}function g(e,t){switch(e.type){case"GeometryCollection":return e.geometries.some((function(e){return g(e,t)}));case"Point":return f(e.coordinates,t);case"MultiPoint":case"LineString":return e.coordinates.some((function(e){return f(e,t)}));case"MultiLineString":return e.coordinates.some((function(e){return e.some((function(e){return f(e,t)}))}));case"Polygon":return e.coordinates.some((function(e){return e.some((function(e){return f(e,t)}))}));case"MultiPolygon":return e.coordinates.some((function(e){return e.some((function(e){return e.some((function(e){return f(e,t)}))}))}));default:return!1}}function y(e,t){return g(e.geometry,t)}var b={point:[u.Ec.primary,u.Ec.draggable,u.Ec.zoomable,u.Ec.clickable,"geojson","point"].join(" ")},h=function(e){var t=e.point,n=s(e,["point"]);return(0,l.jsx)("circle",c({cx:t.x,cy:t.y},n))};function v(e){var t=e.point,n=e.markerComponent,r=void 0===n?h:n,o=e.centers,i=e.zoom,a=e.bounds,u=e.tileSize,m=s(e,["point","markerComponent","centers","zoom","bounds","tileSize"]),p=function(e,t){return d(e.coordinates,t,i,a,u)};return(0,l.jsx)(l.Fragment,{children:o.map((function(e,n){return(0,l.jsx)(r,c({className:b.point,point:p(t,e)},m),n)}))})}var k={multiPoint:[u.Ec.primary,u.Ec.draggable,u.Ec.zoomable,u.Ec.clickable,"geojson","multi-point"].join(" ")};function j(e){var t=e.multiPoint,n=e.feature,r=e.markerComponent,o=void 0===r?h:r,i=e.centers,a=e.zoom,u=e.bounds,m=e.tileSize,p=s(e,["multiPoint","feature","markerComponent","centers","zoom","bounds","tileSize"]);return(0,l.jsx)(l.Fragment,{children:i.flatMap((function(e){return t.coordinates.map((function(t){return function(e,t){return d(e,t,a,u,m)}(t,e)}))})).map((function(e,t){return(0,l.jsx)(o,c({className:k.multiPoint,point:e,feature:n},p),t)}))})}var w={lineString:[u.Ec.primary,u.Ec.draggable,u.Ec.zoomable,u.Ec.clickable,"geojson","line-string"].join(" ")};function x(e){var t=e.lineString,n=e.centers,r=e.zoom,o=e.bounds,i=e.tileSize,a=s(e,["lineString","centers","zoom","bounds","tileSize"]),u=function(e,t){return"M"+e.coordinates.map((function(e){return function(e,t){return d(e,t,r,o,i)}(e,t)})).reduce((function(e,t){return e+" "+t.x+" "+t.y}),"")};return(0,l.jsx)(l.Fragment,{children:n.map((function(e,n){return(0,l.jsx)("path",c({className:w.lineString,d:u(t,e)},a),n)}))})}var z={multiLineString:[u.Ec.primary,u.Ec.draggable,u.Ec.zoomable,u.Ec.clickable,"geojson","multi-line-string"].join(" ")};function S(e){var t=e.multiLineString,n=e.centers,r=e.zoom,o=e.bounds,i=e.tileSize,a=s(e,["multiLineString","centers","zoom","bounds","tileSize"]),u=function(e,t){return"M"+e.map((function(e){return function(e,t){return d(e,t,r,o,i)}(e,t)})).reduce((function(e,t){return e+" "+t.x+" "+t.y}),"")};return(0,l.jsx)(l.Fragment,{children:n.flatMap((function(e){return t.coordinates.map((function(t){return u(t,e)}))})).map((function(e,t){return(0,l.jsx)("path",c({className:z.multiLineString,d:e},a),t)}))})}var E={polygon:[u.Ec.primary,u.Ec.draggable,u.Ec.zoomable,u.Ec.clickable,"geojson","polygon"].join(" ")};function O(e){var t=e.polygon,n=e.centers,r=e.zoom,o=e.bounds,i=e.tileSize,a=s(e,["polygon","centers","zoom","bounds","tileSize"]),u=function(e,t){return e.coordinates.reduce((function(e,n){return e+" M"+n.map((function(e){return function(e,t){return d(e,t,r,o,i)}(e,t)})).reduce((function(e,t){return e+" "+t.x+" "+t.y}),"")+"Z"}),"")};return(0,l.jsx)(l.Fragment,{children:n.map((function(e,n){return(0,l.jsx)("path",c({className:E.polygon,d:u(t,e)},a),n)}))})}var P={multiPolygon:[u.Ec.primary,u.Ec.draggable,u.Ec.zoomable,u.Ec.clickable,"geojson","multi-polygon"].join(" ")};function M(e){var t=e.multiPolygon,n=e.centers,r=e.zoom,o=e.bounds,i=e.tileSize,a=s(e,["multiPolygon","centers","zoom","bounds","tileSize"]),u=function(e,t){return e.reduce((function(e,n){return e+" M"+n.map((function(e){return function(e,t){return d(e,t,r,o,i)}(e,t)})).reduce((function(e,t){return e+" "+t.x+" "+t.y}),"")+"Z"}),"")};return(0,l.jsx)(l.Fragment,{children:n.flatMap((function(e){return t.coordinates.map((function(t,n){return u(t,e)}))})).map((function(e,t){return(0,l.jsx)("path",c({className:P.multiPolygon,d:e},a),t)}))})}function C(e){var t=e.geometry,n=e.feature,r=e.markerComponent,o=e.centers,i=e.zoom,a=e.bounds,u=e.tileSize,m=s(e,["geometry","feature","markerComponent","centers","zoom","bounds","tileSize"]);if("GeometryCollection"===t.type){var p=t;return(0,l.jsx)(l.Fragment,{children:p.geometries.map((function(e,t){return(0,l.jsx)(C,c({feature:n,geometry:e,centers:o,zoom:i,bounds:a,tileSize:u},m),t)}))})}return"Point"===t.type?(0,l.jsx)(v,c({point:t,feature:n,markerComponent:r,centers:o,zoom:i,bounds:a,tileSize:u},m)):"MultiPoint"===t.type?(0,l.jsx)(j,c({multiPoint:t,feature:n,markerComponent:r,centers:o,zoom:i,bounds:a,tileSize:u},m)):"LineString"===t.type?(0,l.jsx)(x,c({lineString:t,centers:o,zoom:i,bounds:a,tileSize:u},m)):"MultiLineString"===t.type?(0,l.jsx)(S,c({multiLineString:t,centers:o,zoom:i,bounds:a,tileSize:u},m)):"Polygon"===t.type?(0,l.jsx)(O,c({polygon:t,centers:o,zoom:i,bounds:a,tileSize:u},m)):"MultiPolygon"===t.type?(0,l.jsx)(M,c({multiPolygon:t,centers:o,zoom:i,bounds:a,tileSize:u},m)):null}var N={feature:[u.Ec.primary,u.Ec.draggable,u.Ec.zoomable,u.Ec.clickable,"geojson","feature"].join(" ")},F={fill:"#93c0d099",strokeWidth:"2",stroke:"white",r:"10"};function T(e){var t=e.feature,n=e.onClick,r=e.onMouseOver,o=e.onMouseOut,a=e.onContextMenu,u=e.requestFeatureStyle,m=e.markerComponent,p=e.worldBounds,d=s(e,["feature","onClick","onMouseOver","onMouseOut","onContextMenu","requestFeatureStyle","markerComponent","worldBounds"]),f=(0,i.useState)(!1),g=f[0],b=f[1],h=u&&u(t,{mouseOver:g})||F;return(0,l.jsx)(l.Fragment,{children:y(t,p)&&(0,l.jsx)("g",c({className:N.feature,clipRule:"evenodd",style:{pointerEvents:"auto"},onClick:n&&function(e){return n(e,t)},onMouseOver:function(e){r&&r(e,t),b(!0)},onMouseOut:function(e){o&&o(e,t),b(!1)},onContextMenu:a&&function(e){return a(e,t)}},{children:(0,l.jsx)(C,c({geometry:t.geometry,feature:t,markerComponent:m},d,h))}))})}var D={geoJsonLayer:[u.Ec.primary,u.Ec.draggable,u.Ec.zoomable,u.Ec.clickable,"geojson-layer"].join(" ")};function L(e){var t=e.data,n=e.requestFeatureStyle,r=e.renderPopup,o=e.markerComponent,a=(0,i.useContext)(u.X$),s=a.center,d=a.zoom,f=a.bounds,g=a.worldBounds,y=a.tileProvider.tileSize,b=(0,i.useState)(),h=b[0],v=b[1],k=(0,i.useState)(),j=k[0],w=k[1],x=function(e,t){v({x:e.clientX,y:e.clientY}),w(t)},z=function(e,t){v(void 0),w(void 0)},S=function(e,t){var n=t.northWest,r=t.southEast,o=Math.trunc(n.longitude/180),i=Math.trunc(r.longitude/180);return m(m(m([],p(o,0,1).map((function(t){return{latitude:e.latitude,longitude:e.longitude+360*t}})),!0),[e],!1),p(0,i,1).map((function(t){return{latitude:e.latitude,longitude:e.longitude+360*(t+1)}})),!0)}(s,g);return(0,l.jsxs)("div",c({className:D.geoJsonLayer,style:{position:"absolute",left:"0",top:"0",pointerEvents:"none",cursor:"pointer",overflow:"hidden"}},{children:[(0,l.jsx)("svg",c({width:f.width,height:f.height,viewBox:"0 0 ".concat(f.width," ").concat(f.height),fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:function(e){return"Feature"===(null==t?void 0:t.type)?(0,l.jsx)(T,{feature:t,markerComponent:o,requestFeatureStyle:n,onMouseOver:x,onMouseOut:z,centers:e,zoom:d,bounds:f,worldBounds:g,tileSize:y}):"FeatureCollection"===(null==t?void 0:t.type)?(0,l.jsx)(l.Fragment,{children:t.features.map((function(t,r){return(0,l.jsx)(T,{feature:t,markerComponent:o,requestFeatureStyle:n,onMouseOver:x,onMouseOut:z,centers:e,zoom:d,bounds:f,worldBounds:g,tileSize:y},"feature-".concat(r))}))}):null}(S)})),(0,l.jsx)("div",c({style:{display:h?"block":"none",top:h?h.y-f.top:0,left:h?h.x-f.left:0,position:"absolute"}},{children:r&&j&&h&&r(j,h)}))]}))}var A={greenwichObservatory:{latitude:51.47684676353231,longitude:-.0005261695762532147},empireStateBuilding:{latitude:40.748585815569854,longitude:-73.9856543574467}},B={width:256,height:256};function W(){var e=(0,i.useRef)(null),t=(0,u.BO)({ref:e,defaultZoom:4}),n=t[0],r=t[1],o=(0,u.c0)({ref:e,defaultCenter:A.greenwichObservatory,zoom:n,tileSize:B}),a=o[0],l=o[1];(0,u.eS)({ref:e,center:a,zoom:n,tileSize:B,onClick:function(e,t){console.log("click",{coordinate:e,point:t})},onDoubleClick:function(e,t){console.log("doubleClick",{coordinate:e,point:t}),l(e),r(n+1)}});var c=(0,i.useState)({}),s=c[0],m=c[1];(0,i.useEffect)((function(){fetch("https://raw.githubusercontent.com/isellsoap/deutschlandGeoJSON/main/2_bundeslaender/4_niedrig.geo.json").then((function(e){return e.json()})).then((function(e){return m(e)}))}),[]);return i.createElement(u.D5,{center:a,zoom:n,width:"600px",height:"400px",ref:e},i.createElement(u.s2,null,i.createElement(u.Jx,{coordinate:A.greenwichObservatory,render:function(e){return i.createElement(u.FB,{point:e})}}),i.createElement(u.Jx,{coordinate:A.empireStateBuilding,render:function(e){return i.createElement(u.FB,{point:e})}}),i.createElement(u.uj,{point:{x:10,y:10},onChange:function(e){return r(e)}})),i.createElement(L,{data:s,requestFeatureStyle:function(e,t){return t.mouseOver?{fill:"#93c0d099",strokeWidth:"2",stroke:"white",opacity:.5}:{fill:"#d4e6ec99",strokeWidth:"1",stroke:"white",r:"20",opacity:.3}},renderPopup:function(e){return e&&e.properties?i.createElement("dl",{style:{width:"100%",overflow:"hidden",padding:0,margin:0,fontFamily:"sans-serif",fontSize:"smaller"}},Object.entries(e.properties).map((function(e){var t=e[0],n=e[1];return i.createElement(i.Fragment,null,i.createElement("dt",{style:{float:"left",width:"25%",padding:0,margin:0,textAlign:"left"}},t),i.createElement("dd",{style:{float:"left",width:"75%",padding:0,margin:0,textAlign:"left"}},n))}))):null}}),i.createElement(u.Ww,null))}var q=["components"],I={sidebar_position:1},X="Map",Z={unversionedId:"intro",id:"intro",title:"Map",description:"A map component for React.",source:"@site/docs/intro.md",sourceDirName:".",slug:"/intro",permalink:"/jetblack-map/docs/intro",draft:!1,editUrl:"https://github.com/rob-blackbourn/jetblack-map/tree/main/website/docs/intro.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",next:{title:"Tutorial",permalink:"/jetblack-map/docs/category/tutorial"}},J={},R=[{value:"Overview",id:"overview",level:2},{value:"Packages",id:"packages",level:2},{value:"Demo",id:"demo",level:2},{value:"Acknowledgements",id:"acknowledgements",level:2},{value:"What Next ?",id:"what-next-",level:2}],_={toc:R};function G(e){var t=e.components,n=(0,o.Z)(e,q);return(0,a.kt)("wrapper",(0,r.Z)({},_,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"map"},"Map"),(0,a.kt)("p",null,"A map component for React."),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,"This package provides a tiled map component with support for interaction and markers."),(0,a.kt)("p",null,"The component has a few unique features:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Is is built as a pure react component with no dependencies,"),(0,a.kt)("li",{parentName:"ul"},"When zoomed out the map can scroll continuously in the horizontal direction."),(0,a.kt)("li",{parentName:"ul"},"It uses hooks to provide interaction with the map.")),(0,a.kt)("h2",{id:"packages"},"Packages"),(0,a.kt)("p",null,"There are two official packages:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/rob-blackbourn/jetblack-map-geojson"},"@jetblack/map-geojson")," - support for geojson"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/rob-blackbourn/jetblack-map-cluster-marker"},"@jetblack/map-cluster-marker")," - cluster markers")),(0,a.kt)("h2",{id:"demo"},"Demo"),(0,a.kt)(W,{mdxType:"DemoMap"}),(0,a.kt)("h2",{id:"acknowledgements"},"Acknowledgements"),(0,a.kt)("p",null,"This is largely a reworking of other libraries."),(0,a.kt)("p",null,"In particular much of the heavy lifting was done by ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/mariusandra/pigeon-maps"},"Pigeon Maps"),"."),(0,a.kt)("p",null,"Another library which was a good source of ideas was ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/gaswelder/react-slippy-map"},"react-slippy-map"),"."),(0,a.kt)("h2",{id:"what-next-"},"What Next ?"),(0,a.kt)("p",null,"See {@page guide/getting-started.md}"))}G.isMDXComponent=!0}}]);